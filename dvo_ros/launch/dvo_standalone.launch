<?xml version="1.0"?>
<launch>

	<!-- Arguments -->
  <arg name="camera" default="/camera"/>

  <include file="$(find openni2_launch)/launch/openni2.launch">
    <arg name="depth_registration"              value="true" />
    <arg name="disparity_processing"            value="false"/>
    <arg name="disparity_registered_processing" value="false"/>
    <arg name="hw_registered_processing"        value="true" />
    <arg name="sw_registered_processing"        value="false" />
    <arg name="num_worker_threads"              value="2" />
    <arg name="color_depth_synchronization"     value="true" />
  </include>

  <node pkg="tf" type="static_transform_publisher" name="robot_to_cam" args="0 0 0 0 0 0 /robot_base_link /camera_link 10" />
  <node pkg="tf" type="static_transform_publisher" name="rotoro" args="0 0 0 0 0 0 /base_link_estimate /robot_base_link 10" />

  <node pkg="dvo_ros" type="camera_tracker" name="camera_tracker" output="screen" respawn="true">
    <remap from="camera/rgb/image_rect" to="camera/rgb/image_rect_color" />
    <remap from="camera/depth_registered/image_rect_raw" to="camera/depth_registered/image_raw" />

    <param name="reconstruction" type="bool" value="true" />
    <param name="use_weighting" type="bool" value="true" />
  </node>
  
  <node name="rqt_reconfigure" pkg="rqt_reconfigure" type="rqt_reconfigure" args="/camera_tracker" />

</launch>
